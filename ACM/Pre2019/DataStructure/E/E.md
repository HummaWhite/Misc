# E

由于不分顺序，最少上升子序列的个数就是区间众数的个数，于是这道题就变成了查询区间众数。分块搞搞。

首先要对输入离散化，$n\log{n}$

预处理前$i$块每个数字个数的前缀和与第$i$块到第$j$块的众数是哪个，大概是$n\sqrt{n}$的复杂度

有了这些信息，查询的时候先找到中间完整块的众数，在向两边扩展的时候统计两边的数字出现多少次，与众数比较。查询一次复杂度是$\sqrt{n}$，总复杂度$(m+n)\sqrt{n}$