# N

其实清楚题意后感觉这道题也有点像状压dp，不过用最短路求就可以了。

用16位数表示某一排目前有哪些人在，限制条件就是CP不能在任意一边同时出现，合法转移不能出现只有队伍成员到另一边或者一次两个方向都有人到另一边的情况。

先$2^{16}$筛出合法状态，再用合法状态$n^2$筛出合法转移并建图，边权为改变了几位。感觉边相对来说可能多一些（其实也说不定），反正Dijkstra比较稳就是了（自己手懒写了SPFA）。