# B

看题解做的。这道题的关键应该就在于看除了免费的边（即生成树上的最大边）之外的边是否能和生成树上比免费边小的边构成树。所以先把比免费边小的边拿出来跑并查集，再用跑完最小生成树剩下的边作连通性判断是可行的。最后的复杂度即为$O(m\log{m})$