# F

状压。

以当前获得武器的集合S作为状态的话，对于每一个S，可以在$n^2$时间内暴力算出接下来可以获得的武器状态。其实这就是DAG上的路径统计，建张图跑一遍就行了。

为保证武器数是一层一层递增扩展的，需要bfs。对于没扩展过的状态，压进队列，加上当前状态的方案数。为防止重复，对于扩展过的状态，要看是不是已经从当前状态扩展过了，没有的话加上当前状态的总数。

不过写的时候没有建图，直接bfs扩展状态。

复杂度应该不会超过$n^2 2^n$